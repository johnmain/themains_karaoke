<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
<script>
async function loadSongs() {
  const res = await fetch('/karaoke_clean.json');
  const songs = await res.json();

  const fuse = new Fuse(songs, {
    keys: ['Artist', 'Title'],
    threshold: 0.3
  });

  const input = document.getElementById('search');
  const resultsEl = document.getElementById('results');

  input.addEventListener('input', () => {
    const query = input.value.trim();
    if (!query) {
      resultsEl.innerHTML = '';
      return;
    }
    const results = fuse.search(query);
    resultsEl.innerHTML = results
      .map(r => `<li class="py-1 border-b border-gray-200 dark:border-neutral-600">${r.item.Artist} - ${r.item.Title}</li>`)
      .join('');
  });
}

loadSongs();
</script>
